<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Set of tools for modelling ecological interactions from phylogenetic, environmental and geographical distance. Include functions to prepare data and analyse data. This is analysis is carried out using Machine Learning techniques.">
<title>Set of Tools for Ecological Interaction Geospatial Analysis â€¢ ecointeraction</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Set of Tools for Ecological Interaction Geospatial Analysis">
<meta property="og:description" content="Set of tools for modelling ecological interactions from phylogenetic, environmental and geographical distance. Include functions to prepare data and analyse data. This is analysis is carried out using Machine Learning techniques.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">ecointeraction</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="ecointeraction">ecointeraction<a class="anchor" aria-label="anchor" href="#ecointeraction"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>This is ecointeraction package. The main goal is provide tools to model and potential interactions given known interactions and predict unknown interactions based, but not limited, on phylogenetic, environmental and geographic distance among the host.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of ecointeraction from <a href="https://github.com/alrobles/ecointeraction" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"alrobles/ecointeraction"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>We explore a raw data base of mammal virus.</p>
<table class="table">
<colgroup>
<col width="5%">
<col width="7%">
<col width="6%">
<col width="19%">
<col width="11%">
<col width="5%">
<col width="3%">
<col width="7%">
<col width="5%">
<col width="12%">
<col width="9%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="left">reference</th>
<th align="left">sampling_year</th>
<th align="left">country</th>
<th align="left">diagnostic_test</th>
<th align="left">diagnostic_test_type</th>
<th align="left">subclade</th>
<th align="left">virus</th>
<th align="left">order</th>
<th align="left">family</th>
<th align="left">mammal_species</th>
<th align="right">individual_tested</th>
<th align="right">incidence</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Ba_2001</td>
<td align="left">ND</td>
<td align="left">Mauritania</td>
<td align="left">NA</td>
<td align="left">Serology</td>
<td align="left">Ae</td>
<td align="left">SABV</td>
<td align="left">Rodentia</td>
<td align="left">Muridae</td>
<td align="left">Acomys_minous</td>
<td align="right">8</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Ba_2001</td>
<td align="left">ND</td>
<td align="left">Mauritania</td>
<td align="left">NA</td>
<td align="left">Serology</td>
<td align="left">Ae</td>
<td align="left">SABV</td>
<td align="left">Rodentia</td>
<td align="left">Muridae</td>
<td align="left">Arvicanthis_niloticus</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Ba_2001</td>
<td align="left">ND</td>
<td align="left">Mauritania</td>
<td align="left">NA</td>
<td align="left">Serology</td>
<td align="left">Ae</td>
<td align="left">SABV</td>
<td align="left">Rodentia</td>
<td align="left">Muridae</td>
<td align="left">Desmodilliscus_braueri</td>
<td align="right">59</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Ba_2001</td>
<td align="left">ND</td>
<td align="left">Mauritania</td>
<td align="left">NA</td>
<td align="left">Serology</td>
<td align="left">Ae</td>
<td align="left">SABV</td>
<td align="left">Rodentia</td>
<td align="left">Muridae</td>
<td align="left">Gerbillus_tarabuli</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Ba_2001</td>
<td align="left">ND</td>
<td align="left">Mauritania</td>
<td align="left">NA</td>
<td align="left">Serology</td>
<td align="left">Ae</td>
<td align="left">SABV</td>
<td align="left">Rodentia</td>
<td align="left">Dipodidae</td>
<td align="left">Jaculus_jaculus</td>
<td align="right">4</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Baba_1990</td>
<td align="left">ND</td>
<td align="left">Nigeria</td>
<td align="left">Hemagglutination-inhibition antibody</td>
<td align="left">Serology</td>
<td align="left">Ae</td>
<td align="left">BANV</td>
<td align="left">Artiodactyla</td>
<td align="left">Camelidae</td>
<td align="left">Camelus_dromedarius</td>
<td align="right">269</td>
<td align="right">13</td>
</tr>
</tbody>
</table>
<p>We use the function accumulate_incidence to get how many reported cases there is for each host species. We use this information to create the datasets to train.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mammal_flavivirus_incidence</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/accumulate_incidence.html">accumulate_incidence</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mammalvirus</span>,</span>
<span>                                                    group <span class="op">=</span> <span class="va">mammal_species</span>,</span>
<span>                                                    incidence <span class="op">=</span> <span class="va">incidence</span><span class="op">)</span></span></code></pre></div>
<p>We print here the frist 6 with head.</p>
<table class="table">
<thead><tr class="header">
<th align="right">id</th>
<th align="left">mammal_species</th>
<th align="right">incidence</th>
<th align="right">cummulativesum</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Camelus_dromedarius</td>
<td align="right">510</td>
<td align="right">510</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Sus_scrofa</td>
<td align="right">336</td>
<td align="right">846</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">Alouatta_caraya</td>
<td align="right">301</td>
<td align="right">1147</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">Odocoileus_virginianus</td>
<td align="right">262</td>
<td align="right">1409</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">Procyon_lotor</td>
<td align="right">217</td>
<td align="right">1626</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="left">Sciurus_carolinensis</td>
<td align="right">183</td>
<td align="right">1809</td>
</tr>
</tbody>
</table>
<p>We use the cutoff_incidence function to keet just the portion of host that has more information about the system.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">flavivirus_host</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cutoff_incidence.html">cutoff_incidence</a></span><span class="op">(</span><span class="va">mammal_flavivirus_incidence</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">id</th>
<th align="left">mammal_species</th>
<th align="right">incidence</th>
<th align="right">cummulativesum</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Camelus_dromedarius</td>
<td align="right">510</td>
<td align="right">510</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Sus_scrofa</td>
<td align="right">336</td>
<td align="right">846</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">Alouatta_caraya</td>
<td align="right">301</td>
<td align="right">1147</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">Odocoileus_virginianus</td>
<td align="right">262</td>
<td align="right">1409</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">Procyon_lotor</td>
<td align="right">217</td>
<td align="right">1626</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="left">Sciurus_carolinensis</td>
<td align="right">183</td>
<td align="right">1809</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="left">Tadarida_brasiliensis</td>
<td align="right">180</td>
<td align="right">1989</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="left">Choloepus_hoffmanni</td>
<td align="right">176</td>
<td align="right">2165</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="left">Arvicanthis_niloticus</td>
<td align="right">168</td>
<td align="right">2333</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="left">Sciurus_niger</td>
<td align="right">160</td>
<td align="right">2493</td>
</tr>
<tr class="odd">
<td align="right">11</td>
<td align="left">Cercopithecus_ascanius</td>
<td align="right">157</td>
<td align="right">2650</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="left">Crocidura_olivieri</td>
<td align="right">133</td>
<td align="right">2783</td>
</tr>
<tr class="odd">
<td align="right">13</td>
<td align="left">Aethomys_kaiseri</td>
<td align="right">126</td>
<td align="right">2909</td>
</tr>
<tr class="even">
<td align="right">14</td>
<td align="left">Didelphis_virginiana</td>
<td align="right">113</td>
<td align="right">3022</td>
</tr>
<tr class="odd">
<td align="right">15</td>
<td align="left">Lemur_catta</td>
<td align="right">97</td>
<td align="right">3119</td>
</tr>
<tr class="even">
<td align="right">16</td>
<td align="left">Canis_latrans</td>
<td align="right">95</td>
<td align="right">3214</td>
</tr>
<tr class="odd">
<td align="right">17</td>
<td align="left">Dasypus_novemcinctus</td>
<td align="right">93</td>
<td align="right">3307</td>
</tr>
<tr class="even">
<td align="right">18</td>
<td align="left">Cervus_elaphus</td>
<td align="right">80</td>
<td align="right">3387</td>
</tr>
<tr class="odd">
<td align="right">19</td>
<td align="left">Artibeus_jamaicensis</td>
<td align="right">78</td>
<td align="right">3465</td>
</tr>
<tr class="even">
<td align="right">20</td>
<td align="left">Rattus_norvegicus</td>
<td align="right">74</td>
<td align="right">3539</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="prepare-data-for-modelling">Prepare data for modelling<a class="anchor" aria-label="anchor" href="#prepare-data-for-modelling"></a>
</h2>
<p>Now we can prepare the dataset for modelling using a distance table. We provide here a distance table calculated befare using mean distance from one target host to the other host. We show here the full pipeline using a count table of plasmodium reported for each host species. Then we use the <code>accumulate_incidence</code> function and the <code>cuttoff_incidence</code> to keep the host with the most information. Then we use <code>prep_incidence_data</code> to prepare the data for modelling using the <code>birdsdistance</code> dataset we provide and print the fifteen first rows</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plasmodium_data</span> <span class="op">&lt;-</span> <span class="va">birdsplasmodium</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>     <span class="fu"><a href="reference/accumulate_incidence.html">accumulate_incidence</a></span><span class="op">(</span>group <span class="op">=</span> <span class="va">species</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>     <span class="fu"><a href="reference/cutoff_incidence.html">cutoff_incidence</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>     <span class="fu"><a href="reference/prep_incidence_data.html">prep_incidence_data</a></span><span class="op">(</span>distance  <span class="op">=</span> <span class="va">birdsdistance</span><span class="op">)</span> </span>
<span><span class="co">#&gt; Joining, by = c("species", "geo_distance", "env_distance", "phylo_distance")</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">models</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/automodel_replication.html">automodel_replication</a></span><span class="op">(</span><span class="va">plasmodium_data</span>, <span class="va">birdsdistance</span><span class="op">)</span></span>
<span><span class="co">#&gt; [2022-09-06 10:54:02] Training of 'Ranger' started.</span></span>
<span><span class="co">#&gt; Loading required package: ggplot2</span></span>
<span><span class="co">#&gt; Loading required package: lattice</span></span>
<span><span class="co">#&gt; [2022-09-06 10:54:36] Training of 'Ranger' completed.</span></span>
<span><span class="va">models</span><span class="op">$</span><span class="va">roc</span></span>
<span><span class="co">#&gt; # A tibble: 1 x 3</span></span>
<span><span class="co">#&gt;   .metric .estimator .estimate</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 roc_auc binary         0.911</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3) + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing ecointeraction</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Angel Robles <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-4674-4270" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Angel Robles.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
